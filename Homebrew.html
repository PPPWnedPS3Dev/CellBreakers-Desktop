<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>CellBreakers Desktop - Homebrew</title>
<style>
  * {margin:0; padding:0; box-sizing:border-box;}
  body {
    font-family: 'Segoe UI', sans-serif;
    overflow: auto;
    background: linear-gradient(135deg, #00111a, #003366);
    color: white;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    position: relative;
  }
  canvas#particles {position:absolute; top:0; left:0; width:100%; height:100%; z-index:0;}
  .container {position:relative; z-index:1; width:90%; max-width:1200px; margin-top:50px;}
  h1 {font-size:2.5rem; letter-spacing:2px; text-shadow:0 0 10px rgba(0,0,0,0.7); margin-bottom:20px; text-align:center;}
  .grid {display:grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap:15px;}
  .card {background: rgba(0,0,0,0.6); padding:15px; border-radius:10px; text-align:center; transition:0.3s; cursor:pointer; display:flex; flex-direction:column; align-items:center; justify-content:center;}
  .card:hover {background: rgba(0,0,0,0.85); transform: translateY(-5px);}
  .card img {width:80px; height:80px; object-fit:contain; margin-bottom:10px;}
  .card p {font-size:1rem; word-break: break-word; color:#fff;}
  button {margin-top:10px; padding:8px 15px; border:none; border-radius:5px; cursor:pointer; background:#0077ff; color:white; font-weight:bold; transition:0.3s;}
  button:hover {background:#00aaff;}
</style>
</head>
<body>
<canvas id="particles"></canvas>
<div class="container">
  <h1>Homebrew Apps & Games</h1>
  <div class="grid" id="homebrewGrid"></div>
</div>

<script>
const canvas = document.getElementById('particles');
const ctx = canvas.getContext('2d');
let particlesArray = [];

// Particle animation
function resizeCanvas(){canvas.width=window.innerWidth;canvas.height=window.innerHeight;}
window.addEventListener('resize',resizeCanvas);resizeCanvas();
class Particle{
  constructor(){this.x=Math.random()*canvas.width;this.y=Math.random()*canvas.height;this.size=Math.random()*2+1;this.speedX=(Math.random()-0.5)*0.5;this.speedY=(Math.random()-0.5)*0.5;this.color=['#00aaff','#0077ff','#003366'][Math.floor(Math.random()*3)];}
  update(){this.x+=this.speedX;this.y+=this.speedY;if(this.x<0||this.x>canvas.width)this.speedX*=-1;if(this.y<0||this.y>canvas.height)this.speedY*=-1;}
  draw(){ctx.beginPath();ctx.arc(this.x,this.y,this.size,0,Math.PI*2);ctx.fillStyle=this.color;ctx.fill();}
}
function initParticles(){particlesArray=[];for(let i=0;i<80;i++){particlesArray.push(new Particle());}}
function animateParticles(){ctx.clearRect(0,0,canvas.width,canvas.height);particlesArray.forEach(p=>{p.update();p.draw();});requestAnimationFrame(animateParticles);} 
initParticles();animateParticles();

// Load user settings
function loadSettings(){
  const bg = localStorage.getItem('bg');
  const particlesEnabled = localStorage.getItem('particles')==='true';
  if(bg) document.body.style.background = `linear-gradient(135deg, ${bg})`;
  if(!particlesEnabled){cancelAnimationFrame(animateParticles);canvas.style.display='none';}
}
loadSettings();

const homebrewGrid = document.getElementById('homebrewGrid');

// Fetch CSV (can also be .json)
async function fetchHomebrew(){
  try{
    const url = 'https://example.com/homebrew.csv'; // replace with your actual CSV or database endpoint
    const res = await fetch(url);
    const text = await res.text();
    const rows = text.split('\n').slice(1); // skip header
    rows.forEach(row=>{
      const [name,type,icon,url] = row.split(',');
      if(name){
        const card = document.createElement('div');
        card.classList.add('card');
        card.innerHTML = `
          <img src="${icon || 'https://via.placeholder.com/80'}" alt="${name}">
          <p>${name} (${type})</p>
          <button onclick="window.open('${url}','_blank')">Download</button>
        `;
        homebrewGrid.appendChild(card);
      }
    });
  }catch(e){
    console.error('Failed to fetch homebrew:',e);
  }
}
fetchHomebrew();
</script>
</body>
</html>
